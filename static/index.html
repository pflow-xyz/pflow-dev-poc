<!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Petri view (HTML/CSS + Canvas)</title>
    <style>
      petri-view { display: block; width: 100%; height: 700px; border: 1px solid #ddd; }
      .pv-root { position: relative; width: 100%; height: 100%; font-family: system-ui, Arial; background:#fafafa; overflow: hidden; }
      canvas.pv-canvas { position: absolute; left:0; top:0; width:100%; height:100%; pointer-events:none; }

      /* nodes */
      .pv-node { position: absolute; box-sizing: border-box; display:flex; align-items:center; justify-content:center; user-select:none; }
      /* place: outer container 72-80px, inner white circle with black stroke (r~16) */
      .pv-place { width:80px; height:80px; border-radius:40px; display:flex; align-items:center; justify-content:center; pointer-events:auto; }
      .pv-place-inner { width:32px; height:32px; border-radius:50%; background:#fff; border:1.5px solid #000; box-shadow:none; box-sizing:border-box; }
      .pv-place-handle { position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:72px; height:72px; border-radius:50%; background:transparent; pointer-events:auto; }

      /* transition: 30x30 rounded rect */
      .pv-transition { width:30px; height:30px; border-radius:4px; display:flex; align-items:center; justify-content:center; cursor:pointer; box-sizing:border-box; background:#ffffff; border:1px solid #000; }
      .pv-transition.pv-active { background:#62fa75; }

      .pv-label { position:absolute; left:50%; transform:translateX(-50%); font-size:12px; color:#222; top:100%; margin-top:6px; pointer-events:none; }
      /* token: for counts >1 show badge, for single token show small dot */
      .pv-token { position:absolute; top:-8px; right:-8px; background:#111; color:#fff; min-width:20px; height:20px; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:12px; padding:0 6px; box-shadow:0 2px 6px rgba(0,0,0,0.25); pointer-events:none; }
      .pv-token-dot { width:6px; height:6px; border-radius:50%; background:#000; box-shadow:none; pointer-events:none; position:absolute; right:-2px; top:-2px; }

      .pv-inhibit { stroke: #c0392b; }
      .pv-weight { position:absolute; font-size:11px; background:#fff; padding:2px 6px; border-radius:12px; box-shadow:0 2px 4px rgba(0,0,0,0.08); pointer-events:none; }
    </style>
    <script type="module" src="./x-pflow.js"></script>
  </head>
  <body>
    <petri-view>
      <script type="application/ld+json">
  {
    "@context": "https://pflow.xyz/schema",
    "@type": "PetriNet",
    "version": "v1",
    "token": [
      "https://pflow.xyz/tokens/black"
    ],
    "places": {
      "place0": {
        "@type": "Place",
        "offset": 0,
        "initial": [1],
        "capacity": [3],
        "x": 130,
        "y": 207
      }
    },
    "transitions": {
      "txn0": { "@type": "Transition", "x": 46, "y": 116 },
      "txn1": { "@type": "Transition", "x": 227, "y": 112 },
      "txn2": { "@type": "Transition", "x": 43, "y": 307 },
      "txn3": { "@type": "Transition", "x": 235, "y": 306 }
    },
    "arcs": [
      { "@type": "Arrow", "source": "txn0", "target": "place0", "weight": [1] },
      { "@type": "Arrow", "source": "place0", "target": "txn1", "weight": [3] },
      { "@type": "Arrow", "source": "txn2", "target": "place0", "weight": [3], "inhibitTransition": true },
      { "@type": "Arrow", "source": "place0", "target": "txn3", "weight": [1], "inhibitTransition": true }
    ]
  }
      </script>
    </petri-view>
  </body>
  </html>